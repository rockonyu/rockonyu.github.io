{"pageProps":{"post":{"title":"JS Ninja: 6. Prototype","date":"2020-08-30T00:00:00.000Z","slug":"2020/js-ninja-讀書會/js-ninja-6-prototype","content":"<p>簡單的筆記與紀錄額外參考，原作：忍者：JavaScript  開發技巧探秘</p>\n<h2 id=\"71-瞭解原型\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#71-瞭解原型\"><span class=\"fas fa-link fa-xs mr-3\"></span></a>7.1 瞭解原型</h2>\n<p>透過原型，物件可以存取屬於其他物件的屬性。\n當存取物件所沒有的屬性時，會在物件原型裡搜索該屬性。</p>\n<pre><code class=\"hljs language-JS\"><span class=\"hljs-keyword\">const</span> yoshi = { <span class=\"hljs-attr\">skulk</span>: <span class=\"hljs-literal\">true</span> };\n<span class=\"hljs-keyword\">const</span> hattori = { <span class=\"hljs-attr\">sneak</span>: <span class=\"hljs-literal\">true</span> };\n\n<span class=\"hljs-title hljs-class\">Object</span>.<span class=\"hljs-title hljs-function\">setPrototypeOf</span>(yoshi, hattori);\n</code></pre>\n<h2 id=\"72-物件建構與原型\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#72-物件建構與原型\"><span class=\"fas fa-link fa-xs mr-3\"></span></a>7.2 物件建構與原型</h2>\n<pre><code class=\"hljs language-JS\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title hljs-function\">Ninja</span>(<span class=\"hljs-params\"></span>){}\n<span class=\"hljs-title hljs-class\">Ninja</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">swingSword</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>){\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>;\n}\n</code></pre>\n<p>使用 <code>new</code> 運算子呼叫，會建立一個全新的物件，而 <code>swingSword</code> 函式會在實例化的物件間共用。\n若將方法定義在 <code>Ninja</code> 函式內，代表每個實例化的物件都各自保有方法定義。\n每個函式的原型物件都有一個 <code>constructor</code> 屬性，會參照到建構器函式。</p>\n<pre><code class=\"hljs language-JS\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title hljs-function\">Ninja</span>(<span class=\"hljs-params\"></span>){}\n\n<span class=\"hljs-keyword\">const</span> ninja = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title hljs-class\">Ninja</span>();\n<span class=\"hljs-keyword\">const</span> ninja2 = <span class=\"hljs-keyword\">new</span> ninja.<span class=\"hljs-title hljs-function\">constructor</span>(<span class=\"hljs-params\"></span>);\n</code></pre>\n<h2 id=\"73-實現物件繼承\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#73-實現物件繼承\"><span class=\"fas fa-link fa-xs mr-3\"></span></a>7.3 實現物件繼承</h2>\n<pre><code class=\"hljs language-JS\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title hljs-function\">Person</span>(<span class=\"hljs-params\"></span>){}\n<span class=\"hljs-title hljs-class\">Person</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">dance</span> = <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>){};\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title hljs-function\">Ninja</span>(<span class=\"hljs-params\"></span>){}\n<span class=\"hljs-title hljs-class\">Ninja</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span> = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title hljs-class\">Person</span>();\n\n<span class=\"hljs-keyword\">var</span> ninja = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title hljs-class\">Ninja</span>();\n\nninja.<span class=\"hljs-property\">constructor</span> === <span class=\"hljs-title hljs-class\">Person</span>\n</code></pre>\n<p>解決 <code>constructor</code> 屬性的問題</p>\n<pre><code class=\"hljs language-JS\"><span class=\"hljs-comment\">// 新增一個不可列舉的 constructor 屬性並指回 Ninja</span>\n<span class=\"hljs-title hljs-class\">Object</span>.<span class=\"hljs-title hljs-function\">defineProperty</span>(<span class=\"hljs-title hljs-class\">Ninja</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>, <span class=\"hljs-string\">\"constructor\"</span>, {\n    <span class=\"hljs-attr\">enumerable</span>: <span class=\"hljs-literal\">false</span>,\n    value <span class=\"hljs-title hljs-class\">Ninja</span>,\n    <span class=\"hljs-attr\">writable</span>: <span class=\"hljs-literal\">true</span>\n});\n\nninja.<span class=\"hljs-property\">constructor</span> === <span class=\"hljs-title hljs-class\">Ninja</span>\n</code></pre>\n<p><code>instanceof</code> 運算子會檢查 <code>Ninja</code> 函式目前的原型，是否出現在 <code>ninja</code> 物件實例的原型串鏈上。</p>\n<h2 id=\"74-在-es6-裡使用-javascript-的類別\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#74-在-es6-裡使用-javascript-的類別\"><span class=\"fas fa-link fa-xs mr-3\"></span></a>7.4 在 ES6 裡使用 JavaScript 的類別</h2>\n<pre><code class=\"hljs language-JS\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title hljs-class\">Person</span> {\n    <span class=\"hljs-title hljs-function\">constructor</span>(<span class=\"hljs-params\">name</span>) {\n        <span class=\"hljs-variable hljs-language\">this</span>.<span class=\"hljs-property\">name</span> = name;\n    }\n\n    <span class=\"hljs-title hljs-function\">dance</span>(<span class=\"hljs-params\"></span>) {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>;\n    }\n}\n\n<span class=\"hljs-comment\">// 使用 extends 關鍵字來繼承其他類別</span>\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title hljs-class\">Ninja</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title hljs-class hljs-inherited\">Person</span> {\n    <span class=\"hljs-title hljs-function\">constructor</span>(<span class=\"hljs-params\">name, weapon</span>) {\n        <span class=\"hljs-variable hljs-language\">super</span>(name);\n        <span class=\"hljs-variable hljs-language\">this</span>.<span class=\"hljs-property\">weapon</span> = weapon;\n    }\n\n    <span class=\"hljs-title hljs-function\">wieldWeapon</span>(<span class=\"hljs-params\"></span>) {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">true</span>;\n    }\n}\n</code></pre>\n<h1 id=\"75-小結\"><a aria-hidden=\"true\" tabindex=\"-1\" href=\"#75-小結\"><span class=\"fas fa-link fa-xs mr-3\"></span></a>7.5 小結</h1>"}},"__N_SSG":true}