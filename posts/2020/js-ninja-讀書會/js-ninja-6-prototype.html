<!DOCTYPE html><html lang="en" class="dark"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"/><link rel="manifest" href="/favicon/site.webmanifest"/><link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#000000"/><link rel="shortcut icon" href="/favicon/favicon.ico"/><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-config" content="/favicon/browserconfig.xml"/><meta name="theme-color" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><meta name="description" content="A statically generated blog example using Next.js and Markdown."/><meta property="og:image" content="https://og-image.now.sh/Next.js%20Blog%20Starter%20Example.png?theme=light&amp;md=1&amp;fontSize=100px&amp;images=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fnextjs-black-logo.svg"/><title>JS Ninja: 6. Prototype | Austin&#x27;s Blog</title><meta property="og:image"/><meta name="next-head-count" content="16"/><link rel="preload" href="/_next/static/css/d67c7c2f4fdc9f75.css" as="style"/><link rel="stylesheet" href="/_next/static/css/d67c7c2f4fdc9f75.css" data-n-g=""/><link rel="preload" href="/_next/static/css/32e14d008cecb695.css" as="style"/><link rel="stylesheet" href="/_next/static/css/32e14d008cecb695.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script src="/_next/static/chunks/webpack-514908bffb652963.js" defer=""></script><script src="/_next/static/chunks/framework-91d7f78b5b4003c8.js" defer=""></script><script src="/_next/static/chunks/main-a5f2beb8b3d215d7.js" defer=""></script><script src="/_next/static/chunks/pages/_app-57f97a3cc8323c9b.js" defer=""></script><script src="/_next/static/chunks/498-770c5889164b4fd6.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5B...slug%5D-0a7aad20420f5724.js" defer=""></script><script src="/_next/static/2DaI63KOecZZIx1xJZ29k/_buildManifest.js" defer=""></script><script src="/_next/static/2DaI63KOecZZIx1xJZ29k/_ssgManifest.js" defer=""></script><script src="/_next/static/2DaI63KOecZZIx1xJZ29k/_middlewareManifest.js" defer=""></script></head><body class="dark:bg-accent-9 dark:text-white"><div id="__next"><div class="min-h-screen"><div class="border-b bg-accent-1 border-accent-2 dark:bg-accent-8 dark:border-accent-7"><div class="container mx-auto px-5"><div class="py-2 text-center text-sm">The source code for this blog is<!-- --> <a href="https://github.com/rockonyu/rockonyu.github.io" class="underline hover:text-success duration-200 transition-colors">available on GitHub</a>.</div></div></div><main><div class="container mx-auto px-5"><h2 class="text-2xl md:text-4xl font-bold tracking-tight md:tracking-tighter leading-tight mb-20 mt-8"><a class="hover:underline" href="/">Blog</a>.</h2><article class="mb-16"><h1 class="text-6xl md:text-7xl lg:text-8xl font-bold tracking-tighter leading-tight md:leading-none mb-12 text-center md:text-left">JS Ninja: 6. Prototype</h1><div class="max-w-2xl mx-auto"><div class="mb-6 text-lg"><time dateTime="2020-08-30T00:00:00.000Z">2020/08/30</time></div></div><div class="max-w-2xl mx-auto"><div class="markdown-styles_markdown__3w_hn mb-16"><p>簡單的筆記與紀錄額外參考，原作：忍者：JavaScript  開發技巧探秘</p>
<h2>7.1 瞭解原型</h2>
<p>透過原型，物件可以存取屬於其他物件的屬性。
當存取物件所沒有的屬性時，會在物件原型裡搜索該屬性。</p>
<pre><code class="hljs language-JS"><span class="hljs-keyword">const</span> yoshi = { <span class="hljs-attr">skulk</span>: <span class="hljs-literal">true</span> };
<span class="hljs-keyword">const</span> hattori = { <span class="hljs-attr">sneak</span>: <span class="hljs-literal">true</span> };

<span class="hljs-title hljs-class">Object</span>.<span class="hljs-title hljs-function">setPrototypeOf</span>(yoshi, hattori);
</code></pre>
<h2>7.2 物件建構與原型</h2>
<pre><code class="hljs language-JS"><span class="hljs-keyword">function</span> <span class="hljs-title hljs-function">Ninja</span>(<span class="hljs-params"></span>){}
<span class="hljs-title hljs-class">Ninja</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">swingSword</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}
</code></pre>
<p>使用 <code>new</code> 運算子呼叫，會建立一個全新的物件，而 <code>swingSword</code> 函式會在實例化的物件間共用。
若將方法定義在 <code>Ninja</code> 函式內，代表每個實例化的物件都各自保有方法定義。
每個函式的原型物件都有一個 <code>constructor</code> 屬性，會參照到建構器函式。</p>
<pre><code class="hljs language-JS"><span class="hljs-keyword">function</span> <span class="hljs-title hljs-function">Ninja</span>(<span class="hljs-params"></span>){}

<span class="hljs-keyword">const</span> ninja = <span class="hljs-keyword">new</span> <span class="hljs-title hljs-class">Ninja</span>();
<span class="hljs-keyword">const</span> ninja2 = <span class="hljs-keyword">new</span> ninja.<span class="hljs-title hljs-function">constructor</span>(<span class="hljs-params"></span>);
</code></pre>
<h2>7.3 實現物件繼承</h2>
<pre><code class="hljs language-JS"><span class="hljs-keyword">function</span> <span class="hljs-title hljs-function">Person</span>(<span class="hljs-params"></span>){}
<span class="hljs-title hljs-class">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">dance</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){};

<span class="hljs-keyword">function</span> <span class="hljs-title hljs-function">Ninja</span>(<span class="hljs-params"></span>){}
<span class="hljs-title hljs-class">Ninja</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-keyword">new</span> <span class="hljs-title hljs-class">Person</span>();

<span class="hljs-keyword">var</span> ninja = <span class="hljs-keyword">new</span> <span class="hljs-title hljs-class">Ninja</span>();

ninja.<span class="hljs-property">constructor</span> === <span class="hljs-title hljs-class">Person</span>
</code></pre>
<p>解決 <code>constructor</code> 屬性的問題</p>
<pre><code class="hljs language-JS"><span class="hljs-comment">// 新增一個不可列舉的 constructor 屬性並指回 Ninja</span>
<span class="hljs-title hljs-class">Object</span>.<span class="hljs-title hljs-function">defineProperty</span>(<span class="hljs-title hljs-class">Ninja</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>, <span class="hljs-string">"constructor"</span>, {
    <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">false</span>,
    value <span class="hljs-title hljs-class">Ninja</span>,
    <span class="hljs-attr">writable</span>: <span class="hljs-literal">true</span>
});

ninja.<span class="hljs-property">constructor</span> === <span class="hljs-title hljs-class">Ninja</span>
</code></pre>
<p><code>instanceof</code> 運算子會檢查 <code>Ninja</code> 函式目前的原型，是否出現在 <code>ninja</code> 物件實例的原型串鏈上。</p>
<h2>7.4 在 ES6 裡使用 JavaScript 的類別</h2>
<pre><code class="hljs language-JS"><span class="hljs-keyword">class</span> <span class="hljs-title hljs-class">Person</span> {
    <span class="hljs-title hljs-function">constructor</span>(<span class="hljs-params">name</span>) {
        <span class="hljs-variable hljs-language">this</span>.<span class="hljs-property">name</span> = name;
    }

    <span class="hljs-title hljs-function">dance</span>(<span class="hljs-params"></span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
}

<span class="hljs-comment">// 使用 extends 關鍵字來繼承其他類別</span>
<span class="hljs-keyword">class</span> <span class="hljs-title hljs-class">Ninja</span> <span class="hljs-keyword">extends</span> <span class="hljs-title hljs-class hljs-inherited">Person</span> {
    <span class="hljs-title hljs-function">constructor</span>(<span class="hljs-params">name, weapon</span>) {
        <span class="hljs-variable hljs-language">super</span>(name);
        <span class="hljs-variable hljs-language">this</span>.<span class="hljs-property">weapon</span> = weapon;
    }

    <span class="hljs-title hljs-function">wieldWeapon</span>(<span class="hljs-params"></span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
}
</code></pre>
<h1>7.5 小結</h1></div><div id="disqus_thread"></div></div></article></div></main></div><footer class="bg-accent-1 border-t border-accent-2 dark:bg-accent-8"><div class="container mx-auto px-5"><div class="py-28 flex flex-col lg:flex-row items-center"><h3 class="text-4xl lg:text-5xl font-bold tracking-tighter leading-tight text-center lg:text-left mb-10 lg:mb-0 lg:pr-4">Statically Generated with Next.js.</h3></div></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"JS Ninja: 6. Prototype","date":"2020-08-30T00:00:00.000Z","slug":"2020/js-ninja-讀書會/js-ninja-6-prototype","content":"\u003cp\u003e簡單的筆記與紀錄額外參考，原作：忍者：JavaScript  開發技巧探秘\u003c/p\u003e\n\u003ch2\u003e7.1 瞭解原型\u003c/h2\u003e\n\u003cp\u003e透過原型，物件可以存取屬於其他物件的屬性。\n當存取物件所沒有的屬性時，會在物件原型裡搜索該屬性。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-JS\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e yoshi = { \u003cspan class=\"hljs-attr\"\u003eskulk\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e };\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e hattori = { \u003cspan class=\"hljs-attr\"\u003esneak\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e };\n\n\u003cspan class=\"hljs-title hljs-class\"\u003eObject\u003c/span\u003e.\u003cspan class=\"hljs-title hljs-function\"\u003esetPrototypeOf\u003c/span\u003e(yoshi, hattori);\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e7.2 物件建構與原型\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-JS\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title hljs-function\"\u003eNinja\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e){}\n\u003cspan class=\"hljs-title hljs-class\"\u003eNinja\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprototype\u003c/span\u003e\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eswingSword\u003c/span\u003e = \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e){\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e;\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e使用 \u003ccode\u003enew\u003c/code\u003e 運算子呼叫，會建立一個全新的物件，而 \u003ccode\u003eswingSword\u003c/code\u003e 函式會在實例化的物件間共用。\n若將方法定義在 \u003ccode\u003eNinja\u003c/code\u003e 函式內，代表每個實例化的物件都各自保有方法定義。\n每個函式的原型物件都有一個 \u003ccode\u003econstructor\u003c/code\u003e 屬性，會參照到建構器函式。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-JS\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title hljs-function\"\u003eNinja\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e){}\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e ninja = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title hljs-class\"\u003eNinja\u003c/span\u003e();\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e ninja2 = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e ninja.\u003cspan class=\"hljs-title hljs-function\"\u003econstructor\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e);\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e7.3 實現物件繼承\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-JS\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title hljs-function\"\u003ePerson\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e){}\n\u003cspan class=\"hljs-title hljs-class\"\u003ePerson\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprototype\u003c/span\u003e\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003edance\u003c/span\u003e = \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e){};\n\n\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title hljs-function\"\u003eNinja\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e){}\n\u003cspan class=\"hljs-title hljs-class\"\u003eNinja\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprototype\u003c/span\u003e\u003c/span\u003e = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title hljs-class\"\u003ePerson\u003c/span\u003e();\n\n\u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e ninja = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title hljs-class\"\u003eNinja\u003c/span\u003e();\n\nninja.\u003cspan class=\"hljs-property\"\u003econstructor\u003c/span\u003e === \u003cspan class=\"hljs-title hljs-class\"\u003ePerson\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e解決 \u003ccode\u003econstructor\u003c/code\u003e 屬性的問題\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-JS\"\u003e\u003cspan class=\"hljs-comment\"\u003e// 新增一個不可列舉的 constructor 屬性並指回 Ninja\u003c/span\u003e\n\u003cspan class=\"hljs-title hljs-class\"\u003eObject\u003c/span\u003e.\u003cspan class=\"hljs-title hljs-function\"\u003edefineProperty\u003c/span\u003e(\u003cspan class=\"hljs-title hljs-class\"\u003eNinja\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e\u003cspan class=\"hljs-keyword\"\u003eprototype\u003c/span\u003e\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"constructor\"\u003c/span\u003e, {\n    \u003cspan class=\"hljs-attr\"\u003eenumerable\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e,\n    value \u003cspan class=\"hljs-title hljs-class\"\u003eNinja\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003ewritable\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n});\n\nninja.\u003cspan class=\"hljs-property\"\u003econstructor\u003c/span\u003e === \u003cspan class=\"hljs-title hljs-class\"\u003eNinja\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003einstanceof\u003c/code\u003e 運算子會檢查 \u003ccode\u003eNinja\u003c/code\u003e 函式目前的原型，是否出現在 \u003ccode\u003eninja\u003c/code\u003e 物件實例的原型串鏈上。\u003c/p\u003e\n\u003ch2\u003e7.4 在 ES6 裡使用 JavaScript 的類別\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-JS\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title hljs-class\"\u003ePerson\u003c/span\u003e {\n    \u003cspan class=\"hljs-title hljs-function\"\u003econstructor\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ename\u003c/span\u003e) {\n        \u003cspan class=\"hljs-variable hljs-language\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ename\u003c/span\u003e = name;\n    }\n\n    \u003cspan class=\"hljs-title hljs-function\"\u003edance\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e;\n    }\n}\n\n\u003cspan class=\"hljs-comment\"\u003e// 使用 extends 關鍵字來繼承其他類別\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title hljs-class\"\u003eNinja\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"hljs-title hljs-class hljs-inherited\"\u003ePerson\u003c/span\u003e {\n    \u003cspan class=\"hljs-title hljs-function\"\u003econstructor\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ename, weapon\u003c/span\u003e) {\n        \u003cspan class=\"hljs-variable hljs-language\"\u003esuper\u003c/span\u003e(name);\n        \u003cspan class=\"hljs-variable hljs-language\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eweapon\u003c/span\u003e = weapon;\n    }\n\n    \u003cspan class=\"hljs-title hljs-function\"\u003ewieldWeapon\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e;\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e7.5 小結\u003c/h1\u003e"}},"__N_SSG":true},"page":"/posts/[...slug]","query":{"slug":["2020","js-ninja-讀書會","js-ninja-6-prototype"]},"buildId":"2DaI63KOecZZIx1xJZ29k","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>